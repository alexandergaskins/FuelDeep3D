% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{plot_las_3d}
\alias{plot_las_3d}
\title{3D visualization of a LAS object colored by height (Z) using rgl}
\usage{
plot_las_3d(
  las,
  bg = "black",
  zlim = NULL,
  height_palette = NULL,
  size = 2,
  max_points = 200000L,
  title = "LAS 3D View"
)
}
\arguments{
\item{las}{A \code{\link[lidR]{LAS}} object.}

\item{bg}{Character. Background color passed to \code{rgl::bg3d()}. Common values include
\code{"black"} and \code{"white"}.}

\item{zlim}{Numeric vector of length 2 (e.g., \code{c(0, 35)}) giving the height range used for
color mapping. Values outside this range are clamped. If \code{NULL}, the observed range is used.}

\item{height_palette}{Character vector of colors used to build the height color ramp.
If \code{NULL}, a default sequential palette is used.}

\item{size}{Numeric. Point size passed to \code{rgl::points3d()}.}

\item{max_points}{Integer. Maximum number of points to plot. If the LAS contains more than
\code{max_points}, a random subset of size \code{max_points} is drawn for faster rendering.
Use \code{NULL} to plot all points (may be slow for large clouds).}

\item{title}{Character. Title shown in the 3D window (via \code{rgl::title3d()}).}
}
\value{
Invisibly returns \code{NULL}.
}
\description{
Opens an interactive \pkg{rgl} 3D window and plots a \code{\link[lidR]{LAS}} point cloud,
coloring points by their height (\code{Z}). The background color and the height range used
for coloring can be customized. For large point clouds, \code{max_points} can be used to
subsample points for faster rendering.
}
\details{
Points are colored using their \code{Z} (height) values mapped to a continuous color gradient.

\itemize{
\item \strong{Height scaling (\code{zlim})}: If \code{zlim = c(zmin, zmax)} is provided,
\code{Z} values are clamped to \code{[zmin, zmax]} before mapping to colors. This prevents
extreme outliers from dominating the color scale and helps preserve contrast in the
understory/canopy.

\item \strong{Automatic range}: If \code{zlim = NULL}, the observed \code{Z} range
(after any optional subsampling) is used automatically.

\item \strong{Custom palettes (\code{height_palette})}: You can provide a vector of colors
(e.g., \code{c("purple","blue","cyan","yellow","red")}) to define the height color ramp.

\item \strong{Performance (\code{max_points})}: Rendering millions of points can be slow.
If \code{max_points} is set and the LAS has more points than this value, points are randomly
subsampled (without modifying the original LAS object) to improve interactivity.
}

This function is intentionally skipped during \code{R CMD check} to avoid interactive graphics
in CRAN checks.
}
\examples{
\donttest{
library(lidR)
las <- readLAS(system.file("extdata", "las", "tree2.laz", package = "FuelDeep3D"))
if (!lidR::is.empty(las)) {
  # Black background, color from 0 to 35 height units
  plot_las_3d(las, bg = "black", zlim = c(0, 35), size = 2, max_points = 200000)

  # White background, automatic height range
  plot_las_3d(las, bg = "white", zlim = NULL, size = 2, max_points = 100000)

  # Custom height palette
  plot_las_3d(
    las,
    bg = "black",
    zlim = c(0, 35),
    height_palette = c("purple", "blue", "cyan", "yellow", "red"),
    max_points = 150000
  )
}
}

}
